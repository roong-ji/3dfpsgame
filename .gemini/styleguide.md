# C\# 코딩 컨벤션 및 스타일 가이드

이 문서는 프로젝트 내 C\# 코드의 일관성, 가독성, 유지 보수성 확보를 위한 공식 코딩 규칙을 정의합니다. 모든 Pull Request(PR)는 아래 명시된 규칙을 준수해야 합니다.

---

## 0. 🤖 코드 리뷰 봇 지침 (Gemini Code Assistant)

* **리뷰 언어:** Gemini Code Assistant는 모든 코드 리뷰 요약 및 코멘트를 **한국어(Korean)**로 작성해야 합니다. 한국인이 쉽게 이해할 수 있도록 명확하고 자연스러운 한글 설명을 사용해야 하며, 영어나 기타 언어 사용은 허용되지 않습니다.

---

## 1. 🛠️ 도구 및 파일 구성 지침

* **스타일 자동 적용:** 팀 내 일관성 유지를 위해 **`.editorconfig`** 파일을 사용하여 IDE에서 스타일 지침을 자동으로 적용해야 합니다.
* **코드 분석:** 원하는 규칙을 적용하기 위해 **코드 분석(Code Analysis)**을 사용하며, CI 빌드 단계에서 규칙 위반 시 경고 및 진단이 발생하도록 구성해야 합니다.

---

## 2. 📝 C\# 언어 사용 및 구문 규칙

* **최신 기능 활용:** 가능하면 최신 C\# 언어 기능을 활용하고, 오래된 구문은 사용하지 않습니다.
* **데이터 형식:** 런타임 형식(예: `System.Int32`) 대신 **언어 키워드**(`int`, `string`)를 사용합니다. 부호 없는 형식보다 `int` 사용을 선호합니다.
* **`var` 사용:** 변수 형식을 **명확히 유추할 수 있는 경우에만** `var`를 사용합니다.
* **문자열 처리:**
    * 짧은 연결에는 **문자열 보간**(`$"{}"`)을 사용합니다.
    * 루프 내 대용량에는 **`System.Text.StringBuilder`**를 사용합니다.
    * 긴 메시지에는 **원시 문자열 리터럴**(`"""..."""`) 사용을 권장합니다.
* **컬렉션 초기화:** **컬렉션 식(`[]`)**을 사용하여 모든 컬렉션 형식을 초기화합니다.
* **대리자:** 사용자 정의 대리자 대신 **`Func<>` 또는 `Action<>`**을 사용합니다.
* **비동기 처리:** I/O 작업에는 **`async`/`await`**를 사용하며, 교착 상태에 주의하며 필요시 **`Task.ConfigureAwait`** 사용을 고려합니다.
* **예외 처리:** **처리할 수 있는 특정 예외만 `catch`**하며, 일반적인 `System.Exception`을 포괄적으로 잡지 않습니다. 특정 예외 유형을 사용하여 의미 있는 오류 메시지를 제공합니다.

---

## 3. 🏷️ 명명 규칙 (Naming Conventions)

### 3.1. PascalCase (파스칼 표기법) 사용 대상

* **형식:** 클래스, 구조체, 레코드(`record`), 대리자(`delegate`)
* **인터페이스:** **`I`** 접두사를 붙인 PascalCase를 사용합니다.
* **공용 멤버:** 속성, 메서드, 이벤트, 공용 필드
* **상수:** 정적 필드와 로컬 상수를 포함한 모든 상수에 사용합니다.
* **레코드의 기본 생성자 매개변수:** Public 속성이 되므로 PascalCase를 사용합니다.

### 3.2. camelCase (카멜 표기법) 사용 대상

* **변수:** 메서드 매개변수, 지역 변수
* **클래스 및 구조체의 기본 생성자 매개변수:** 다른 메서드 매개변수와 동일하게 camelCase를 사용합니다.

### 3.3. 필드 명명 및 접두사

| 대상 | 접두사 | 예시 | 비고 |
| :--- | :--- | :--- | :--- |
| Private 인스턴스 필드 | `_` (밑줄) | `_workerQueue` | 이름은 camelCase 사용 |
| 정적 필드 | `s_` | `s_defaultLogger` | 이름은 camelCase 사용 |
| 스레드 정적 필드 | `t_` | `t_timeSpan` | 이름은 camelCase 사용 |

### 3.4. 일반 명명 원칙

* **명확성:** 의미 있고 설명적인 이름을 사용하며, **간결성보다 명확성**을 우선합니다.
* **밑줄 연속 사용:** 두 개의 연속된 밑줄(`__`)은 사용하지 않습니다.
* **단일 문자 이름:** 단순 루프 카운터를 제외하고 단일 문자 이름 사용을 피해야 합니다.
* **네임스페이스:** 역방향 도메인 이름 표기법을 따르는 의미 있는 이름을 사용합니다.

---

## 4. 📐 레이아웃 및 주석 규칙

* **들여쓰기:** **4개의 공백**을 사용하며, 탭은 사용하지 않습니다.
* **중괄호 스타일 (Bracing):** **"Allman" 스타일**을 사용합니다. 여는 중괄호와 닫는 중괄호는 자체 줄에 위치하며 현재 들여쓰기 수준에 맞춥니다.
* **코드 밀도:** 한 줄에 하나의 문장 및 하나의 선언만 작성합니다.
* **빈 줄:** 메서드 정의와 속성 정의 간에는 한 줄 이상의 빈 줄을 추가합니다.
* **주석 (코드):** **`//`**를 사용하며, 코드 줄 끝이 아닌 **별도의 줄**에 배치합니다.

5. 🧑‍💻 추가 디자인 및 유지 보수 원칙
5.1. 보이스카우트 법칙 (Boy Scout Rule) ⚜️
핵심 원칙: "체크아웃할 때보다 항상 코드를 더 깨끗하게 체크인하라."

지침: 버그 수정, 새 기능 추가 등의 작업을 위해 코드를 방문했을 때, 해당 영역의 코드 가독성이나 구조를 개선하는 작은 리팩토링 작업을 수행해야 합니다.

예시: 이름 명확화, 주석 추가/수정, 메서드 추출, 작은 DRY(Don't Repeat Yourself) 위반 수정 등.

목표: 코드베이스의 지속적인 품질 향상과 점진적인 기술 부채 감소를 목표로 합니다.

5.2. 함수(메서드) 단일 책임 (Single Responsibility for Functions)
핵심 원칙: 함수(메서드)는 단 하나의 일만 해야 합니다. (SOLID의 SRP 원칙이 클래스에 적용되듯, 이는 함수 레벨에 적용됩니다.)

지침:

명확한 목적: 함수 이름이 해당 함수가 수행하는 모든 작업을 명확하게 설명해야 합니다.

추출: 함수가 여러 단계를 수행하거나, 여러 수준의 추상화를 처리하는 경우, 하위 단계들을 별도의 함수로 추출해야 합니다. (함수 길이는 일반적으로 10~20줄 이하를 유지하도록 권장됩니다.)

일관된 추상화 수준: 함수 내의 모든 문장은 동일한 수준의 추상화에 있어야 합니다. 즉, 하나의 함수 내에서 고수준 로직과 저수준 세부 구현이 섞이지 않도록 합니다.